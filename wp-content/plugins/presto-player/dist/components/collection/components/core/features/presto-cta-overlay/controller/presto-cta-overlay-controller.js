import{h}from"@stencil/core";import{timePassed}from"../../../../../util";export class PrestoCtaOverlayController{constructor(){this.ended=void 0,this.currentTime=void 0,this.duration=void 0,this.direction=void 0,this.cta=void 0,this.i18n=void 0,this.provider=void 0,this.enabled=void 0,this.show=void 0,this.loading=void 0,this.error=void 0,this.skipped=void 0,this.percentagePassed=0}componentWillLoad(){this.handleDuration()}handleEnded(e){var t;if(e){if(100!==(null===(t=null==this?void 0:this.cta)||void 0===t?void 0:t.percentage))return;this.show=!0}}handleDuration(){var e;this.enabled=!this.skipped&&(null===(e=null==this?void 0:this.cta)||void 0===e?void 0:e.enabled),this.handleTime()}handlePercentagePassed(){this.percentagePassed=this.currentTime/this.duration*100}handleEnabled(){this.show&&(this.skipped||this.pauseVideo.emit(!0))}handleTime(){var e;this.enabled&&(this.skipped||100!==(null===(e=null==this?void 0:this.cta)||void 0===e?void 0:e.percentage)&&this.checkTime())}checkTime(){var e;this.show=timePassed({current:this.currentTime,duration:this.duration,showAfter:(null===(e=null==this?void 0:this.cta)||void 0===e?void 0:e.percentage)||0})}skip(){this.skipped=!0,this.show=!1,this.playVideo.emit()}rewatch(){this.ended=!1,this.show=!1,this.restartVideo.emit()}handleCtaStateChange(e){this.ctaStateChange.emit(e)}render(){var e,t,i,o,r,a,n,s,l,d,c,u,p,v;if(this.show)return h("presto-cta-overlay-ui",{style:Object.assign(Object.assign(Object.assign({"--presto-player-button-border-radius":`${null===(e=null==this?void 0:this.cta)||void 0===e?void 0:e.button_radius}px`},(null===(t=null==this?void 0:this.cta)||void 0===t?void 0:t.background_opacity)?{"--presto-player-cta-background-opacity":""+(null===(i=null==this?void 0:this.cta)||void 0===i?void 0:i.background_opacity)/100}:{}),(null===(o=null==this?void 0:this.cta)||void 0===o?void 0:o.button_color)?{"--presto-player-button-color":`${null===(r=null==this?void 0:this.cta)||void 0===r?void 0:r.button_color}`}:{}),(null===(a=null==this?void 0:this.cta)||void 0===a?void 0:a.button_text_color)?{"--presto-player-button-text":`${null===(n=null==this?void 0:this.cta)||void 0===n?void 0:n.button_text_color}`}:{}),direction:this.direction,class:"cta-overlay",i18n:this.i18n,headline:null===(s=null==this?void 0:this.cta)||void 0===s?void 0:s.headline,"bottom-text":null===(l=null==this?void 0:this.cta)||void 0===l?void 0:l.bottom_text,"show-button":null===(d=null==this?void 0:this.cta)||void 0===d?void 0:d.show_button,buttonLink:null===(c=null==this?void 0:this.cta)||void 0===c?void 0:c.button_link,allowSkip:!this.ended&&(null===(u=null==this?void 0:this.cta)||void 0===u?void 0:u.show_skip),allowRewatch:this.ended&&(null===(p=null==this?void 0:this.cta)||void 0===p?void 0:p.show_rewatch),"button-text":null===(v=null==this?void 0:this.cta)||void 0===v?void 0:v.button_text,onSkip:()=>this.skip(),onRewatch:()=>this.rewatch(),provider:this.provider})}static get is(){return"presto-cta-overlay-controller"}static get originalStyleUrls(){return{$:["presto-cta-overlay-controller.css"]}}static get styleUrls(){return{$:["presto-cta-overlay-controller.css"]}}static get properties(){return{ended:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"ended",reflect:!1},currentTime:{type:"number",mutable:!1,complexType:{original:"number",resolved:"number",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"current-time",reflect:!0},duration:{type:"number",mutable:!1,complexType:{original:"number",resolved:"number",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"duration",reflect:!0},direction:{type:"string",mutable:!1,complexType:{original:"'rtl'",resolved:'"rtl"',references:{}},required:!1,optional:!0,docs:{tags:[],text:""},attribute:"direction",reflect:!1},cta:{type:"unknown",mutable:!1,complexType:{original:"CTA",resolved:"CTA",references:{CTA:{location:"import",path:"../../../../../interfaces"}}},required:!1,optional:!0,docs:{tags:[],text:""}},i18n:{type:"unknown",mutable:!1,complexType:{original:"i18nConfig",resolved:"i18nConfig",references:{i18nConfig:{location:"import",path:"../../../../../interfaces"}}},required:!1,optional:!1,docs:{tags:[],text:""}},provider:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"provider",reflect:!1}}}static get states(){return{enabled:{},show:{},loading:{},error:{},skipped:{},percentagePassed:{}}}static get events(){return[{method:"playVideo",name:"playVideo",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:""},complexType:{original:"void",resolved:"void",references:{}}},{method:"pauseVideo",name:"pauseVideo",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:""},complexType:{original:"boolean",resolved:"boolean",references:{}}},{method:"restartVideo",name:"restartVideo",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:""},complexType:{original:"void",resolved:"void",references:{}}},{method:"ctaStateChange",name:"ctaStateChange",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:""},complexType:{original:"boolean",resolved:"boolean",references:{}}}]}static get watchers(){return[{propName:"ended",methodName:"handleEnded"},{propName:"duration",methodName:"handleDuration"},{propName:"currentTime",methodName:"handlePercentagePassed"},{propName:"duration",methodName:"handlePercentagePassed"},{propName:"currentTime",methodName:"handleEnabled"},{propName:"currentTime",methodName:"handleTime"},{propName:"show",methodName:"handleCtaStateChange"}]}}